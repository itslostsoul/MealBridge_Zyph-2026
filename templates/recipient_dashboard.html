<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Recipient Dashboard</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='Single-Leaf-Logo-Template-removebg-preview.png') }}">
    <style>
        html, body { height: 100%; background-color: #F4F9F4; font-family: 'Segoe UI', sans-serif; }
        .navbar-custom { padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; }
        .dashboard-title { font-size: 28px; font-weight: bold; color: #000; }
        .main-container { display: flex; justify-content: center; padding-top: 30px; padding-bottom: 50px; }
        .custom-card { 
            background-color: white; 
            border-radius: 20px; 
            padding: 40px; 
            width: 900px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); 
            border: 1px solid #e0e0e0;
        }
        .listings-title { color: #1B5E20; font-weight: 800; font-size: 24px; margin-bottom: 20px; text-align: center;}
        .table thead th { border-bottom: 2px solid #eee; color: #1B5E20; font-weight: 700; }
        .table td { padding: 15px 10px; vertical-align: middle; border-bottom: 1px solid #f0f0f0; }
        .btn-claim {
            background-color: #1B5E20;
            color: white;
            border-radius: 20px;
            padding: 8px 20px;
            font-weight: bold;
            text-decoration: none;
            transition: 0.3s;
        }
        .btn-claim:hover { background-color: #144a18; color: white; }
        .footer-logo {
            text-align: center; margin-top: 30px; padding-bottom: 40px;
            font-weight: 700; font-size: 24px; color: #1B5E20;
            display: flex; align-items: center; justify-content: center; gap: 15px;
        }
        .footer-logo img { height: 80px; }
    </style>
</head>
<body>

    <div class="navbar-custom">
        <div class="dashboard-title">Recipient Dashboard</div>
        <div style="display: flex; align-items: center; gap: 15px;">
            
            <a href="{{ url_for('home') }}" style="text-decoration: none; color: #1B5E20; font-weight: bold; font-size: 18px;">
                Home
            </a>

            <span style="color: #ccc;">|</span>

            <div style="font-size: 18px; font-weight: 600; color: #333;">Welcome, Partner</div>
            <a href="{{ url_for('logout') }}" class="btn btn-danger" style="border-radius: 20px; font-weight: bold; padding: 5px 20px;">Logout</a>
        </div>
    </div>

    <div class="main-container">
        <div class="custom-card">
            <div class="listings-title">Available Food for Pickup</div>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Food Name</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Expiry Date</th>
                        <th scope="col" class="text-end">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in food %}
                    <tr>
                        <td style="font-weight: 600; font-size: 18px;">{{ item[2] }}</td>
                        <td>{{ item[3] }} kg</td>
                        <td style="color: #d32f2f; font-weight: 500;">{{ item[5] }}</td> 
                        <td class="text-end">
                            <a href="/claim_food/{{ item[0] }}" class="btn-claim">Claim Meal</a>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center" style="padding: 30px; color: #777;">
                            No food available right now. Check back later!
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="footer-logo">
        Supporting UN Sustainable Development Goal 2: 
        <img src="{{ url_for('static', filename='UN_SDG_Logo-removebg-preview.png') }}" alt="Zero Hunger">
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <script>
                alert("{{ messages[0] }}");
            </script>
        {% endif %}
    {% endwith %}

</body>
</html>